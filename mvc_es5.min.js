var _get=function get(c,a,b){null===c&&(c=Function.prototype);var e=Object.getOwnPropertyDescriptor(c,a);if(void 0===e){if(c=Object.getPrototypeOf(c),null!==c)return get(c,a,b)}else{if("value"in e)return e.value;a=e.get;return void 0===a?void 0:a.call(b)}},_createClass=function(){function c(a,b){for(var d=0;d<b.length;d++){var e=b[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,e.key,e)}}return function(a,b,d){b&&c(a.prototype,b);d&&c(a,d);return a}}();
function _possibleConstructorReturn(c,a){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!==typeof a&&"function"!==typeof a?c:a}
function _inherits(c,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}function _classCallCheck(c,a){if(!(c instanceof a))throw new TypeError("Cannot call a class as a function");}
var MC=function(){function c(){_classCallCheck(this,c)}_createClass(c,[{key:"httpDelete",value:function(){this.model={id:this.model.id,__Status:"DEL"};return this.httpPatch()}},{key:"httpGet",value:function(a){var b=this;return new Promise(function(d,e){$.ajax(b.url+"('"+a+"')",{error:function(a,d,c){e(b,a,d,c)},method:"GET",success:function(a,e,c){d(b,a,e,c)}})})}},{key:"httpPatch",value:function(){var a=this;return new Promise(function(b,d){$.ajax(a.url+"('"+a.model.id+"')",{data:JSON.stringify(a.model),
error:function(b,l,c){d(a,b,l,c)},method:"PATCH",success:function(d,c,f){b(a,c,f)}})})}},{key:"httpPost",value:function(){var a=this;return new Promise(function(b,d){a._model.id=null;$.ajax(a.url,{data:JSON.stringify(a.model),error:function(b,c,f){d(a,b,c,f)},method:"POST",success:function(d,c,f){a._model.id=f.getResponseHeader("OData-EntityID");b(a,d,c,f)}})})}},{key:"httpPut",value:function(){var a=this;return new Promise(function(b,d){$.ajax(a.url+"('"+a.model.id+"')",{data:JSON.stringify(a.model),
error:function(b,c,f){d(a,b,c,f)},method:"PUT",success:function(d,c,f){b(a,d,c,f)}})})}}]);return c}(),CotModelMC=function(c){function a(){_classCallCheck(this,a);return _possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}_inherits(a,c);_createClass(a,[{key:"httpDelete",value:function(){this.model=this.cotModel.toJSON();return _get(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"httpDelete",this).call(this)}},{key:"httpGet",value:function(b){var d=
this;return _get(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"httpGet",this).call(this,b).then(function(){d._cotModel.set(d.model)})}},{key:"httpPatch",value:function(){this.model=this.cotModel.toJSON();return _get(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"httpPatch",this).call(this)}},{key:"httpPost",value:function(){var b=this;this.model=this.cotModel.toJSON();return _get(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"httpPost",this).call(this).then(function(){b.cotModel.set("id",
b.model.id)})}},{key:"httpPut",value:function(){this.model=this.cotModel.toJSON();return _get(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"httpPut",this).call(this)}}]);return a}(MC),VC=function(){function c(){_classCallCheck(this,c)}_createClass(c,[{key:"remove",value:function(){return Promise.resolve()}},{key:"render",value:function(){var a=this;return new Promise(function(b,d){(new Promise(function(b,d){1!=a.renderedOnce?(a.renderedOnce=!0,a.render_once().then(function(){b()},function(){d()})):
b()})).then(function(){a.render_always().then(function(){b()},function(){d()})},function(){d()})})}},{key:"render_always",value:function(){return Promise.resolve()}},{key:"render_once",value:function(){return Promise.resolve()}}]);return c}(),NavbarVC=function(c){function a(){_classCallCheck(this,a);return _possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}_inherits(a,c);_createClass(a,[{key:"closeVC",value:function(a){var b=this;return new Promise(function(c,
d){if(null!=b.vcs&&0<b.vcs.length&&b.vcs[b.vcs.length-1]==a)if(b.vcs.pop(),0<b.vcs.length){var l=b.vcs.pop();b.vcs.push(a,l)}else b.vcs.$view.hide();b.render().then(function(){var d=b.vcs.indexOf(a);-1!=d&&b.vcs.splice(d,1);a.remove().then(function(){c()})})})}},{key:"render_always",value:function(){var a=this;return new Promise(function(b,c){a.$view.filter(".requireLogin").hide();Promise.all([a.render_always_login(),new Promise(function(b,c){a.render_always_vc().then(function(){a.render_always_menu().then(function(){b()})})})]).then(function(){b()},
function(){c()})})}},{key:"render_always_login",value:function(){var a=this;return new Promise(function(b,c){var d=a.$view.find(".navbar-login").empty();if(null!=a.cotLogin)if(a.cotLogin.isLoggedIn())d.append('\n\t\t\t\t\t\t\t<form class="navbar-form navbar-left">\n\t\t\t\t\t\t\t\t<p class="form-control-static">'+a.cotLogin.username+'</p>\n\t\t\t\t\t\t\t\t<button class="btn btn-default btn-logout" type="button">Logout</button>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t').find(".btn-logout").on("click",
function(b){b.preventDefault();a.cotLogin.logout()});else d.append('\n\t\t\t\t\t\t\t<form class="navbar-form navbar-left">\n\t\t\t\t\t\t\t\t<button class="btn btn-default btn-login" type="button">Login</button>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t').find(".btn-login").on("click",function(b){b.preventDefault();a.cotLogin.showLogin()});b()})}},{key:"render_always_menu",value:function(){var a=this;return new Promise(function(b,c){var d=a.$view.find(".navbar-menu");d.html('\n\t\t\t\t<ul class="nav navbar-nav">\n\t\t\t\t\t<li class="dropdown">\n\t\t\t\t\t\t<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Navigation <span class="caret"></span></a>\n\t\t\t\t\t\t<ul class="dropdown-menu">\n\t\t\t\t\t\t\t<li role="separator" class="divider"></li>\n\t\t\t\t\t\t\t<li><a href="#">Dynamic Item</a></li>\n\t\t\t\t\t\t\t<li><a href="#">Dynamic Item</a></li>\n\t\t\t\t\t\t\t<li><a href="#">Dynamic Item</a></li>\n\t\t\t\t\t\t\t<li><a href="#">Dynamic Item</a></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t');
var e=d.find("ul.dropdown-menu").empty();if(null!=a.menu){d=!0;var h=!1,k=void 0;try{for(var n=function(){var b=q.value,c=$('<li><a href="#">'+b.title+"</a></li>");e.append(c);c.find("a").on("click",function(c){c.preventDefault();null==b.vc&&(b.vc=new a.vcClasses[b.vcClass]);a.openVC(b.vc)})},g=a.menu[Symbol.iterator](),q;!(d=(q=g.next()).done);d=!0)n()}catch(m){h=!0,k=m}finally{try{!d&&g["return"]&&g["return"]()}finally{if(h)throw k;}}}g=a.vcs.filter(function(a){return null!=a.title});null!=a.menu&
0<a.menu.length&&null!=g&&0<g.length&&e.append($('<li role="separator" class="divider"></li>'));if(null!=g){d=!0;h=!1;k=void 0;try{n=function(){var b=r.value,c=$('<li><a href="#">'+(b.title||"Untitled")+"</a></li>");e.append(c);c.find("a").on("click",function(c){c.preventDefault();a.openVC(b)})};for(var p=g[Symbol.iterator](),r;!(d=(r=p.next()).done);d=!0)n()}catch(m){h=!0,k=m}finally{try{!d&&p["return"]&&p["return"]()}finally{if(h)throw k;}}}b()})}},{key:"render_always_vc",value:function(){var a=
this;return null==this.vcs||0==this.vcs.length?(null==this.defaultVC.vc&&(this.defaultVC.vc=new this.vcClasses[this.defaultVC.vcClass]),this.openVC(this.defaultVC.vc)):new Promise(function(b,c){(new Promise(function(b,c){1<a.vcs.length?a.vcs[a.vcs.length-2].$view.fadeOut(function(){b()}):b()})).then(function(){var c=a.vcs[a.vcs.length-1];c.navbarVC=a;c.render().then(function(){c.$view.fadeIn(function(){b()})})})})}},{key:"render_once",value:function(){var a=this;return new Promise(function(b,c){null!=
a.cotLogin&&(a.cotLogin.options.onLogin=function(){a.render()});a.$view=$('\n\t\t\t\t<nav class="navbar navbar-default navvc">\n\t\t\t\t\t<div class="container-fluid">\n\t\t\t\t\t\t<div class="navbar-header">\n\t\t\t\t\t\t\t<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">\n\t\t\t\t\t\t\t\t<span class="sr-only">Toggle navigation</span>\n\t\t\t\t\t\t\t\t<span class="icon-bar"></span>\n\t\t\t\t\t\t\t\t<span class="icon-bar"></span>\n\t\t\t\t\t\t\t\t<span class="icon-bar"></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<span class="navbar-brand"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">\n\t\t\t\t\t\t\t<div class="navbar-left">\n\t\t\t\t\t\t\t\t<div class="navbar-vc-ui"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="navbar-right">\n\t\t\t\t\t\t\t\t<div class="navbar-menu"></div>\n\t\t\t\t\t\t\t\t<div class="navbar-login"></div>\n\t\t\t\t\t\t\t\t<div class="navbar-lock"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</nav>\n\t\t\t\t<div class="requireLogin">\n\t\t\t\t\t<p>Please login.</p>\n\t\t\t\t</div>\n\t\t\t');
$(".navbar-lock",a.$view.filter(".navbar")).append($(".securesite > img"));$("#app-content-top > div").append(a.$view);b()})}},{key:"openVC",value:function(a){null==this.vcs&&(this.vcs=[]);var b=this.vcs.indexOf(a);-1!=b&&this.vcs.splice(b,1);this.vcs.push(a);return this.render()}}]);return a}(VC);
